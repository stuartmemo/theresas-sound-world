/**
 * @name Theresa's Sound World
 * @description A JavaScript library for audio manipulation.
 * @version v0.8.3
 * @tutorial http://theresassoundworld.com
 * @author Stuart Memo
 * @license MIT
 */
!function e(t,n,r){function o(a,c){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}}},{}],2:[function(e,t,n){"use strict";var r=e("./tsw-core");r.analyser=function(){return r.context().createAnalyser()},r.info=function(e){return{duration:function(e){var t=Math.floor(e/60);return{minutes:t,seconds:e-60*t,totalSeconds:e}}(e.duration),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate}},t.exports=r},{"./tsw-core":4}],3:[function(e,t,n){var r=e("./tsw-main");window.tsw=r},{"./tsw-main":7}],4:[function(e,t,n){"use strict";var r,o=e("./helpers");r=function(){var e=function(e){return Array.isArray(e)},t=function(e){return"object"==typeof e},n=function(e){return void 0!==e},r=function(e){n(e);if(n(e)&&null!==e)return!0},i=function(e){var t=!1;return Object(e)&&"node"in e&&(t=!0),t},a=function(e){return void 0!==e.context},c=function(e){return e.hasOwnProperty("input")||e.hasOwnProperty("output")},u=function(e){return!!t(e)&&"setValueAtTime"in e},s=function(e,t,n,o,i){r(e[t].value)?r(o)?function(e,t,n,o,i){if(r(i))switch(i){case"linear":e[t].setValueAtTime(e[t].value,p.now()),e[t].linearRampToValueAtTime(n,o);break;case"exponential":e[t].setValueAtTime(e[t].value,p.now()),0===n&&(n=1e-8),e[t].exponentialRampToValueAtTime(n,o);break;default:e[t].setValueAtTime(n,o)}else e[t].setValueAtTime(n,o)}(e,t,n,o,i):e[t].value=n:e[t]=n},f=function(e,t){return function(n,o,i){return r(n)?s(e,t,n,o,i):function(e,t){if(e&&r(e[t]))return r(e[t].value)?e[t].value:e[t]}(e,t)}},p={},l=[];p.version="0.8.3",p.isBrowserSupported=!1,p.processors=[];p.now=function(){return this.context().currentTime},p.channelSplitter=function(){return p.context().createChannelSplitter()},p.channelMerger=function(e){return p.context().createChannelMerger(e)},p.connect=function(){var t,n=arguments.length,r=function(e,t){e.connectedTo=e.connectedTo||[],e.hasOwnProperty("connectedTo")&&e.connectedTo.push(t)},o=function(){arguments[0].connect(arguments[1],0,arguments[2]),r(arguments[0],arguments[1])},s=function(){arguments[0].connect(arguments[1].input,0,arguments[2]),r(arguments[0],arguments[1])},f=function(){for(var e=0;e<arguments[1].length;e++)p.connect(arguments[0],arguments[1][e])},l=function(){for(var e=0;e<arguments[0].length;e++)p.connect(arguments[0][e],arguments[1])},d=function(){arguments[0].output.connect(arguments[1].input,0,arguments[2]),r(arguments[0],arguments[1])},h=function(){arguments[0].output.connect(arguments[1],0,arguments[2]),r(arguments[0],arguments[1])},v=function(){for(var e=0;e<arguments[1].length;e++)p.connect(arguments[0],arguments[1][e])},m=function(){for(var e=0;e<arguments[0].length;e++)p.connect(arguments[0][e],arguments[1])},y=function(){for(var e=0;e<arguments[0].length;e++)p.connect(arguments[0][e],arguments[1])},g=function(){arguments[0].connect(arguments[1])},w=function(){arguments[0].output.connect(arguments[1])};for(t=0;t<n-1;t++){var b=arguments[t],x=arguments[t+1];if(a(b)&&c(x))s(b,x);else if(c(b)&&a(x))h(b,x);else if(a(b)&&e(x))f(b,x);else if(e(b)&&a(x))l(b,x);else if(a(b)&&a(x))o(b,x);else if(c(b)&&c(x))d(b,x);else if(c(b)&&e(x))v(b,x);else if(e(b)&&c(x))m(b,x);else if(e(b)&&e(x))y(b,x);else if(i(b)&&e(x))connectObjectWithNodeToArray(b,x);else if(e(b)&&i(x))connectArrayToObjectWithNode(b,x);else{if(i(b)&&i(x)){if(a(b.node)&&a(x.node)){o(b.node,x.node,x.channel);continue}if(c(b.node)&&a(x.node)){h(b.node,x.node,x.channel);continue}if(a(b.node)&&c(x.node)){s(b.node,x.node,x.channel);continue}if(c(b.node)&&c(x.node)){d(b.node,x.node,x.channel);continue}}a(b)&&u(x)?g(b,x):c(b)&&u(x)&&w(b,x)}}},p.disconnect=function(){var e,t=arguments.length;for(e=0;e<t;e++)arguments[e].disconnect&&(arguments[e].disconnect(),arguments[e].connectedTo=[]),c(arguments[e])&&(p.disconnect(arguments[e].output),arguments[e].connectedTo=[])},p.disconnectAfterTime=function(e,t){l.push({node:e,time:t})},p.load=function(){var e,t,n={},r=arguments[0],o="",i=0,a=this,c=function(e,t,n,r,o,c){var u=new XMLHttpRequest;u.open("GET",e+n,!0),u.responseType="arraybuffer";u.onreadystatechange=function(){4===u.readyState&&(200===u.status?(0,a.context().decodeAudioData(u.response,function(e){r[t]=e,Object.keys(r).length===i&&o(r)})):(0,function(e){return"function"==typeof e}(c)?c():console.log("There was an error loading your file(s)",u.status)))},u.send()};if("object"==typeof arguments[1]?(o=arguments[1].path||"",arguments[1].extensions||[]):"function"==typeof arguments[1]&&(e=arguments[1]),"function"==typeof arguments[2]&&(t=arguments[2]),"object"==typeof r){i=Object.keys(r).length;for(var u in r)c(o,u,r[u],n,e,t)}else{if("string"!=typeof r)throw new Error("Files must be an array or a valid string.");i=1}},p.wait=function(e){var t,n=this.context().createDelay();return t=p.createNode(),t.nodeType="wait",t.time=f(n,"delayTime"),t.time(e||1),p.connect(t.input,n,t.output),t},p.createMonoMaker=function(){var e={};return e.input=p.createGain(),e.output=p.createGain(),p.connect(e.input,e.output),e},p.panner=function(e){p.gain();var t,r=p.gain(0),o=p.gain(0),i=p.channelMerger(2);(t=p.createNode()).nodeType="panner";return t.pan=function(e,t){var i;if(!n(e))return-2*(r.gain()-1)-1;i=1-((e=function(e){return e>1?e=1:e<-1&&(e=-1),e}(e||0))+1)/2,r.gain(i,t),o.gain(1-i,t)},t.pan(e||0),p.connect(t.input,[r,o]),p.connect({node:r},{node:i,channel:0}),p.connect({node:o},{node:i,channel:1}),p.connect(i,t.output),t},p.play=function(t,n){n=n||0,e(t)?t.forEach(function(e){e.start(n)}):t.start(n)},p.stop=function(e,t){t=t||0,e.stop(t)},p.reverse=function(e){for(var t=0;t<e.buffer.numberOfChannels;t++)Array.prototype.reverse.call(e.buffer.getChannelData(t));return e};return p.createNode=function(e){var t={};return e=e||{},t.input=p.context().createGain(),t.output=p.context().createGain(),Object.keys(e).forEach(function(n){t[n]=e[n]}),t.connectedTo=[],e.hasOwnProperty("sourceNode")?function(e){this.start=function(t){return void 0===e.sourceNode.start?e.sourceNode.noteOn(t||p.now()):e.sourceNode.start(t||p.now()),this},this.stop=function(t){return void 0===e.sourceNode.stop?e.sourceNode.noteOff(t||p.now()):e.sourceNode.stop(t||p.now()),this}}.call(t,e):e.sourceNode=!1,t},p.oscillator=function(e,t){var n,r=p.context().createOscillator();return n=p.createNode({sourceNode:r,nodeType:"oscillator"}),n.frequency=f(r,"frequency"),n.type=f(r,"type"),n.detune=f(r,"detune"),n.params={frequency:r.frequency},n.frequency(e||440),n.type((t||"sine").toLowerCase()),n.isPlaying=function(){return 2===r.playbackState},this.connect(r,n.output),n},p.gain=function(e,t){var n,r;return r="function"==typeof this.context().createGain?this.context().createGain():this.context().createGainNode(),n=p.createNode({nodeType:"gain"}),n.params={gain:r.gain},n.gain=f(r,"gain"),n.gain(e,t),this.connect(n.input,r,n.output),n},p.buffer=function(e,t,n){var r;return e=e||1,t=t||65536,n=n||44100,r=this.context().createBuffer(e,t,n),r.nodeType="buffer",r},p.bufferBox=function(e){var t,n,r,o,i=p.createNode({nodeType:"bufferBox",paused:!1,stopped:!0}),a=0,c=!1;return i.buffer=function(e){if(!e)return t;t=e},i.loop=function(e){return c=e,this},e&&i.buffer(e),i.play=function(e){var u=this;(n=p.context().createBufferSource()).buffer=t,n.loop=c,this.paused=!1,this.stopped=!1,this.playing=!0,p.connect(n,i.output),n.onended=function(){!u.paused&&!u.stopped&&i.position()>=i.buffer().length/p.context().sampleRate&&(a=0,u.stopped=!0,o&&o())},r=e||p.now(),n.start(r,a)},i.stop=function(e){a=0,this.paused=!1,this.stopped=!0,n&&n.stop(e||p.now())},i.on=function(e,t){"end"===e&&(o=t)},i.pause=function(e){this.paused=!0,n&&(n.stop(e||p.now()),p.disconnect(n)),this.stopped||(a=a+p.now()-r)},i.position=function(e){if(!e&&0!==e)return this.paused||this.stopped?a:a+p.now()-r;this.paused||this.stopped?a=e:(this.pause(),a=e,this.play())},i.start=i.play,i},p.decode=function(e,t,n){this.context().decodeAudioData(e,t,n)},p.filter=function(){var e=p.createNode({type:"filter"}),n={},r=p.context().createBiquadFilter();return t(arguments[0])?(n.type=arguments[0].type,n.frequency=arguments[0].frequency||1e3,n.Q=arguments[0].Q,n.gain=arguments[0].gain):o.isString(arguments[0])&&(n.type=arguments[0]),e.nodeType="filter",e.type=f(r,"type"),e.frequency=f(r,"frequency"),e.Q=f(r,"Q"),e.gain=f(r,"gain"),e.type(n.type||"lowpass"),e.frequency(n.frequency||1e3),e.Q(n.Q||0),e.gain(n.gain||0),this.connect(e.input,r,e.output),e},p.analyser=function(){return this.context().createAnalyser()},p.compressor=function(e){var n=p.createNode({nodeType:"compressor"}),r=this.context().createDynamicsCompressor();return e=function(e,t){for(var n in t)e[n]=t[n];return e}({threshold:-24,knee:30,ratio:12,attack:.003,release:.25},e),function(e,n){for(var r in n)t(e[r])&&(e[r].value=n[r])}(r,e),n.threshold=f(r,"threshold"),n.knee=f(r,"knee"),n.ratio=f(r,"ratio"),n.attack=f(r,"attack"),n.release=f(r,"release"),this.connect(n.input,r,n.output),n},p.processor=function(e,t){var n=e||1024,r=p.context().createScriptProcessor(n,1,1);return"function"==typeof t&&(r.onaudioprocess=function(e){t(e)}),r},p.waveShaper=function(){for(var e=this.context().createWaveShaper(),t=new Float32Array(65536),n=0;n<32768;n++)t[n]=n<3e4?.1:-1;return e.curve=t,e},p.envelope=function(e){var t={};return e=e||{},t.name=e.name||"",t.nodeType="envelope",t.startLevel=e.startLevel||0,t.maxLevel=e.maxLevel||1,t.minLevel=e.minLevel||0,t.param=e.param||null,t.attackTime=e.attack||0,t.decayTime=e.decay||0,t.sustainLevel=e.sustain||1,t.releaseTime=e.release||0,u(e.param)&&(t.param=e.param),t.start=function(e){var t=this.attackTime+this.decayTime;this.releaseTime;this.maxLevel=this.startLevel+this.maxLevel,this.sustainLevel=this.startLevel+this.sustainLevel,u(this.param)&&(e=e||p.now(),this.param.setValueAtTime(this.startLevel,e),this.param.linearRampToValueAtTime(this.maxLevel,e+this.attackTime),this.param.setValueAtTime(this.maxLevel,e+this.attackTime),this.param.exponentialRampToValueAtTime(this.sustainLevel,e+t),this.param.setValueAtTime(this.sustainLevel,e+t))},t.release=function(e){var t=this.minLevel;e=e||p.now(),0===this.minLevel&&(t=1e-8),u(this.param)&&(this.param.setValueAtTime(this.sustainLevel,e),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.setValueAtTime(this.minLevel,e+this.releaseTime))},t},p.noise=function(){var e,t=this.buffer(),n=this.bufferBox(),r=t.length;for(e=0;e<r;e++)t.getChannelData(0)[e]=2*Math.random()-1;return n.nodeType="noise",n.buffer(t),n.loop(!0),n},p.lfo=function(e){var t,n=p.oscillator(e||10);return t=p.createNode({sourceNode:n,nodeType:"lfo"}),t.modulate=function(e){r(e)&&(p.connect(n,e),n.start())},t.frequency=n.frequency,t},p.getUserAudio=function(e,t){navigator.webkitGetUserMedia({audio:!0},function(t){var n=p.context().createMediaStreamSource(t);e(n)},t)},p.init=function(){!function(e,t){var n;if("undefined"==typeof webkitAudioContext&&"undefined"==typeof AudioContext){if("function"==typeof webkitAudioContext)void 0===webkitAudiocontext().prototype.createGainNode&&t("Sorry, your browser doesn't support a recent enough version of the Web Audio API.");else if("function"==typeof webkitAudiocontext){var r=webkitAudiocontext().prototype;r.createGain=r.createGainNode,r.createDelay=r.createDelayNode,r.createScriptProcessor=r.createJavaScriptNode}}else"function"==typeof AudioContext?(n=new AudioContext,p.context=function(){return n}):(n=new webkitAudioContext,p.context=function(){return n});p.isBrowserSupported=!0,e()}(function(){"function"==typeof p.context&&(p.speakers=p.context().destination,p.osc=p.oscillator)},function(e){console.log(e)})},p}(),"undefined"!=typeof window&&window.document&&r.init(),t.exports=r},{"./helpers":1}],5:[function(e,t,n){"use strict";var r=e("./tsw-core");r.delay=function(e){var t=r.createNode(),n=r.wait(),o=r.gain(),i=r.gain(),a=r.gain();return t.settings={delayTime:.5,feedback:.5,level:.5},e=e||{},n.delayTime.value=e.delayTime||t.settings.delayTime,o.gain.value=e.feedback||t.settings.feedback,i.gain.value=e.level||t.settings.level,r.connect(t.input,a,n,o,n,i,t.output),r.connect(a,n),t},r.distortion=function(e){var t=r.createNode(),n=r.context().createWaveShaper(),o=r.context().createBiquadFilter(),i=r.context().createBiquadFilter();return t.settings={distortionLevel:.5},e=e||{},r.connect(t.input,n,[o,i],t.output),t},r.phaser=function(e){var t=r.createNode(),n=[],o=r.gain(),i=0;for(t.settings={rate:8,depth:.5,feedback:.8},e=e||{},o.gain.value=e.feedback||t.settings.feedback,e.rate=e.rate||t.settings.rate,i=0;i<e.rate;i++)n[i]=r.context().createBiquadFilter(),n[i].type=7,n[i].frequency.value=100*i;for(i=0;i<n.length-1;i++)r.connect(n[i],n[i+1]);return r.connect(t.input,n[n.length-1],o,n[0]),r.connect(n[n.length-1],t.output),t.setCutoff=function(e){for(var t=0;t<n.length;t++)n[t].frequency.value=e},t},r.reverb=function(e){var t=r.context().createConvolver(),n=r.gain(),o={},i={effectLevel:.5,reverbTime:.5,reverbType:"spring",reverbPath:""};return e=e||{},n.gain.value=e.effectLevel||i.effectLevel,r.load({hall:"/effects/reverb/responses/bright-hall.wav",room:"/effects/reverb/responses/medium-room.wav",spring:"/effects/reverb/responses/feedback-spring.wav"},function(e){i.reverbPath=e[i.reverbType],t.buffer=i.reverbPath,o.input=r.gain(),o.output=r.gain(),r.connect(o.input,[o.output,t]),r.connect(t,n),r.connect(n,o.output)}),o},r.tremolo=function(e){var t={},n=(r.gain(),this.lfo()),o=this;return e=e||{},t.input=r.gain(),t.connect=function(e){t.input.connect(e),n.modulate(t.input.gain),n.start(o.now())},t.setRate=function(e){n.frequency(e)},t.setDepth=function(e){n.depth(e)},t},t.exports=r},{"./tsw-core":4}],6:[function(e,t,n){"use strict";var r={};if("undefined"!=typeof URL&&URL.createObjectURL){var o=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){"start"===e.data&&setInterval(function(){self.postMessage("tick")},25)})}.toString(),")()"],{type:"application/javascript"})),i=new Worker(o);URL.revokeObjectURL(o)}r.secondsPerBeat=function(e){return 60/e},r.loop=function(e,t,n){var o,a,c=0;t=t||120,a=1/((n=n||16)/4),o=r.now(),i.postMessage("start"),i.addEventListener("message",function(i){if("tick"===i.data)for(;o<r.now()+.1;)e(o,c+1),o+=a*r.secondsPerBeat(t),++c===n&&(c=0)})},t.exports=r},{}],7:[function(e,t,n){var r=e("./tsw-core"),o=e("./tsw-effects"),i=e("./tsw-music"),a=e("./tsw-loop"),c=e("./tsw-midi"),u=e("./tsw-analysis"),s={};for(var f in r)s[f]=r[f];for(var f in o)s[f]=o[f];for(var f in i)s[f]=i[f];for(var f in a)s[f]=a[f];for(var f in c)s[f]=c[f];for(var f in u)s[f]=u[f];t.exports=s},{"./tsw-analysis":2,"./tsw-core":4,"./tsw-effects":5,"./tsw-loop":6,"./tsw-midi":8,"./tsw-music":9}],8:[function(e,t,n){"use strict";var r=e("./helpers"),o={},i=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];o.isMidiSupported=function(){return"function"==typeof navigator.requestMIDIAccess},o.getUserMidi=function(e,t){this.isMidiSupported()&&navigator.requestMIDIAccess().then(e,t)};var a=function(e){var t=e.match(/^[A-g#]+/)[0],n=parseInt(e.match(/\d+/g),10);return function(e){for(var t=i.length,n=0;n<t;n++)if(e.toUpperCase()===i[n])return n;return null}(t)+12*n};o.midiNote=function(e){return r.isString(e)?a(e):r.isNumber(e)?function(e){var t=e%12,n=Math.floor(e/12),r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return r.push.apply(r,r),r[t]+n}(e):void 0},t.exports=o},{"./helpers":1}],9:[function(e,t,n){"use strict";var r={},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];o.push.apply(o,o);var i=["unison","flat 2nd","2nd","minor 3rd","major 3rd","perfect 4th","flat 5th","perfect 5th","minor 6th","major 6th","minor 7th","major 7th","octave","flat 9th","9th","sharp 9th","major 10th","11th","augmented 11th","perfect 12th","flat 13th","13th"],a=function(e){for(var t=o.length,n=0;n<t;n++)if(e.toUpperCase()===o[n])return n,n;return null};r.chord=function(e){var t={},n=[],i=0;return!Array.isArray(e)&&(e=e.toLowerCase(),t.rootNote=e[0].toUpperCase(),t.isMajor=e.indexOf("maj")>-1,t.isMinor=!t.isMajor&&e.indexOf("m")>-1,t.is7th=e.indexOf("7")>-1,t.notes=[],t.is7th||(t.octave=e.match(/\d/g)),t.isMajor||t.isMinor||e.is7th||(t.isMajor=!0),i=a(t.rootNote),n.push(i),e.isMinor?n.push(i+r.semitoneDifference("minor 3rd")):n.push(i+r.semitoneDifference("major 3rd")),n.push(i+r.semitoneDifference("perfect 5th")),n.push(i+r.semitoneDifference("octave")),n.forEach(function(e){t.notes.push(o[e])}),t.notes)},r.scale=function(e,t){return"minor"===t?function(e){var t=[],n=a(e);return t.push(o[n]),t.push(o[n+2]),t.push(o[n+3]),t.push(o[n+5]),t.push(o[n+7]),t.push(o[n+8]),t.push(o[n+10]),t.push(o[n+12]),t}(e):function(e){var t=[],n=a(e);return t.push(o[n]),t.push(o[n+2]),t.push(o[n+4]),t.push(o[n+5]),t.push(o[n+7]),t.push(o[n+9]),t.push(o[n+11]),t.push(o[n+12]),t}(e)},r.semitoneDifference=function(e){for(var t=i.length,n=0;n<t;n++)if(e===i[n])return n},r.flat=function(e){var t;return e=e.replace("#","b"),"H"===(t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)+1))&&(t="A"),t+=e.substr(1)},r.sharp=function(e){var t,n=0;return-1===e.indexOf("b")?e:(e=e.replace("b","#"),"@"===(t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)-1))&&(t="G"),"B"===t&&(n=e.search(/\d/))>-1&&(e=e.substring(0,n)+(e[n]-1)+e.substring(n+1)),t+=e.substr(1))},r.frequency=function(e){var t,n,r,i;return!1!==function(e){return!("string"!=typeof e||e.length>3)}(e)&&(r=e.search(/\d/),t=parseInt(e.slice(-1)),isNaN(t)&&(t=4),e=this.sharp(e),i=e,r>-1&&(i=e.substr(0,r)),n=o.indexOf(i.toUpperCase()),n+=12*t,parseFloat(440*Math.pow(2,(n-57)/12),10))},t.exports=r},{}]},{},[3]);