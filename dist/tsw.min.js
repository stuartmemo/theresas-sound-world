/**
 * @name Theresa's Sound World
 * @description A JavaScript library for audio manipulation.
 * @version v0.10.0
 * @tutorial http://theresassoundworld.com
 * @author Stuart Memo
 * @license MIT
 */
!function i(a,c,u){function s(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(f)return f(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var r=c[t]={exports:{}};a[t][0].call(r.exports,function(e){return s(a[t][1][e]||e)},r,r.exports,i,a,c,u)}return c[t].exports}for(var f="function"==typeof require&&require,e=0;e<u.length;e++)s(u[e]);return s}({1:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}}},{}],2:[function(e,t,n){"use strict";var o=e("./tsw-core");o.analyser=function(){return o.context().createAnalyser()},o.info=function(e){return{duration:(t=e.duration,{minutes:n=Math.floor(t/60),seconds:t-60*n,totalSeconds:t}),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate};var t,n},t.exports=o},{"./tsw-core":4}],3:[function(e,t,n){var o=e("./tsw-main");window.tsw=o},{"./tsw-main":6}],4:[function(e,t,n){"use strict";var u=e("./helpers"),o=function(){function s(e){return Array.isArray(e)}function a(e){return void 0!==e}function i(e){return a(e),a(e)&&null!==e?1:void 0}function f(e){var t=!1;return Object(e)&&"node"in e&&(t=!0),t}function p(e){return void 0!==e.context}function l(e){return e.hasOwnProperty("input")||e.hasOwnProperty("output")}function d(e){return!!o(e)&&"setValueAtTime"in e}function c(e,t,n,o,r){i(e[t].value)?i(o)?function(e,t,n,o,r){if(i(r))switch(r){case"linear":e[t].setValueAtTime(e[t].value,h.now()),e[t].linearRampToValueAtTime(n,o);break;case"exponential":e[t].setValueAtTime(e[t].value,h.now()),0===n&&(n=1e-8),e[t].exponentialRampToValueAtTime(n,o);break;default:e[t].setValueAtTime(n,o)}else e[t].setValueAtTime(n,o)}(e,t,n,o,r):e[t].value=n:e[t]=n}function r(o,r){return function(e,t,n){return i(e)?c(o,r,e,t,n):function(e,t){if(e&&i(e[t]))return i(e[t].value)?e[t].value:e[t]}(o,r)}}var o=function(e){return"object"==typeof e},h={},n=[];h.version="0.10.0",h.isBrowserSupported=!1,h.processors=[];h.now=function(){return this.context().currentTime},h.channelSplitter=function(){return h.context().createChannelSplitter()},h.channelMerger=function(e){return h.context().createChannelMerger(e)},h.connect=function(){for(var e=arguments.length,t=function(e,t){e.connectedTo=e.connectedTo||[],e.hasOwnProperty("connectedTo")&&e.connectedTo.push(t)},n=function(){arguments[0].connect(arguments[1],0,arguments[2]),t(arguments[0],arguments[1])},o=function(){arguments[0].connect(arguments[1].input,0,arguments[2]),t(arguments[0],arguments[1])},r=function(){arguments[0].output.connect(arguments[1].input,0,arguments[2]),t(arguments[0],arguments[1])},i=function(){arguments[0].output.connect(arguments[1],0,arguments[2]),t(arguments[0],arguments[1])},a=0;a<e-1;a++){var c=arguments[a],u=arguments[a+1];if(p(c)&&l(u))o(c,u);else if(l(c)&&p(u))i(c,u);else if(p(c)&&s(u))!function(){for(var e=0;e<arguments[1].length;e++)h.connect(arguments[0],arguments[1][e])}(c,u);else if(s(c)&&p(u))!function(){for(var e=0;e<arguments[0].length;e++)h.connect(arguments[0][e],arguments[1])}(c,u);else if(p(c)&&p(u))n(c,u);else if(l(c)&&l(u))r(c,u);else if(l(c)&&s(u))!function(){for(var e=0;e<arguments[1].length;e++)h.connect(arguments[0],arguments[1][e])}(c,u);else if(s(c)&&l(u))!function(){for(var e=0;e<arguments[0].length;e++)h.connect(arguments[0][e],arguments[1])}(c,u);else if(s(c)&&s(u))!function(){for(var e=0;e<arguments[0].length;e++)h.connect(arguments[0][e],arguments[1])}(c,u);else if(f(c)&&s(u))connectObjectWithNodeToArray(c,u);else if(s(c)&&f(u))connectArrayToObjectWithNode(c,u);else{if(f(c)&&f(u)){if(p(c.node)&&p(u.node)){n(c.node,u.node,u.channel);continue}if(l(c.node)&&p(u.node)){i(c.node,u.node,u.channel);continue}if(p(c.node)&&l(u.node)){o(c.node,u.node,u.channel);continue}if(l(c.node)&&l(u.node)){r(c.node,u.node,u.channel);continue}}p(c)&&d(u)?function(){arguments[0].connect(arguments[1])}(c,u):l(c)&&d(u)&&function(){arguments[0].output.connect(arguments[1])}(c,u)}}},h.disconnect=function(){for(var e=arguments.length,t=0;t<e;t++)arguments[t].disconnect&&(arguments[t].disconnect(),arguments[t].connectedTo=[]),l(arguments[t])&&(h.disconnect(arguments[t].output),arguments[t].connectedTo=[])},h.disconnectAfterTime=function(e,t){n.push({node:e,time:t})},h.load=function(){function e(e,t,n,o,r,i){var a=new XMLHttpRequest;a.open("GET",e+n,!0),a.responseType="arraybuffer",a.onreadystatechange=function(){4===a.readyState&&(200===a.status?u.context().decodeAudioData(a.response,function(e){o[t]=e,Object.keys(o).length===c&&r(o)}):"function"==typeof i?i():console.log("There was an error loading your file(s)",a.status))},a.send()}var t,n,o={},r=arguments[0],i="",c=0,u=this;if("object"==typeof arguments[1]?(i=arguments[1].path||"",arguments[1].extensions):"function"==typeof arguments[1]&&(t=arguments[1]),"function"==typeof arguments[2]&&(n=arguments[2]),"object"==typeof r)for(var a in c=Object.keys(r).length,r)e(i,a,r[a],o,t,n);else{if("string"!=typeof r)throw new Error("Files must be an array or a valid string.");c=1}},h.wait=function(e){var t=this.context().createDelay(),n=h.createNode();return n.nodeType="wait",n.time=r(t,"delayTime"),n.time(e||1),h.connect(n.input,t,n.output),n},h.createMonoMaker=function(){var e={};return e.input=h.createGain(),e.output=h.createGain(),h.connect(e.input,e.output),e},h.panner=function(e){h.gain();var r=h.gain(0),i=h.gain(0),t=h.channelMerger(2),n=h.createNode();n.nodeType="panner";return n.pan=function(e,t){var n,o;if(!a(e))return-2*(r.gain()-1)-1;1<(o=e||0)?o=1:o<-1&&(o=-1),n=1-((e=o)+1)/2,r.gain(n,t),i.gain(1-n,t)},n.pan(e||0),h.connect(n.input,[r,i]),h.connect({node:r},{node:t,channel:0}),h.connect({node:i},{node:t,channel:1}),h.connect(t,n.output),n},h.play=function(e,t){t=t||0,s(e)?e.forEach(function(e){e.start(t)}):e.start(t)},h.stop=function(e,t){t=t||0,e.stop(t)},h.reverse=function(e){for(var t=0;t<e.buffer.numberOfChannels;t++)Array.prototype.reverse.call(e.buffer.getChannelData(t));return e};return h.createNode=function(t){var n={};return t=t||{},n.input=h.context().createGain(),n.output=h.context().createGain(),Object.keys(t).forEach(function(e){n[e]=t[e]}),n.connectedTo=[],t.hasOwnProperty("sourceNode")?function(t){this.start=function(e){return void 0===t.sourceNode.start?t.sourceNode.noteOn(e||h.now()):t.sourceNode.start(e||h.now()),this},this.stop=function(e){return void 0===t.sourceNode.stop?t.sourceNode.noteOff(e||h.now()):t.sourceNode.stop(e||h.now()),this}}.call(n,t):t.sourceNode=!1,n},h.oscillator=function(e,t){var n=h.context().createOscillator(),o=h.createNode({sourceNode:n,nodeType:"oscillator"});return o.frequency=r(n,"frequency"),o.type=r(n,"type"),o.detune=r(n,"detune"),o.params={frequency:n.frequency},o.frequency(e||440),o.type((t||"sine").toLowerCase()),o.isPlaying=function(){return 2===n.playbackState},this.connect(n,o.output),o},h.gain=function(e,t){var n="function"==typeof this.context().createGain?this.context().createGain():this.context().createGainNode(),o=h.createNode({nodeType:"gain"});return o.params={gain:n.gain},o.gain=r(n,"gain"),o.gain(e,t),this.connect(o.input,n,o.output),o},h.buffer=function(e,t,n){var o;return e=e||1,t=t||65536,n=n||44100,(o=this.context().createBuffer(e,t,n)).nodeType="buffer",o},h.bufferBox=function(e){var o,r,i,a,c=h.createNode({nodeType:"bufferBox",paused:!1,stopped:!0}),u=0,s=!1;return c.buffer=function(e){if(!e)return o;o=e},c.loop=function(e){return s=e,this},e&&c.buffer(e),c.play=function(e,t){var n=this;(r=h.context().createBufferSource()).buffer=o,r.loop=s,this.paused=!1,this.stopped=!1,this.playing=!0,h.connect(r,c.output),r.onended=function(){!n.paused&&!n.stopped&&c.position()>=c.buffer().length/h.context().sampleRate&&(u=0,n.stopped=!0,a&&a())},i=e||h.now(),r.start(i,u,t)},c.stop=function(e){u=0,this.paused=!1,this.stopped=!0,r&&r.stop(e||h.now())},c.on=function(e,t){"end"===e&&(a=t)},c.pause=function(e){this.paused=!0,r&&(r.stop(e||h.now()),h.disconnect(r)),this.stopped||(u=u+h.now()-i)},c.position=function(e){return e||0===e?(this.paused||this.stopped?u=e:(this.pause(),u=e,this.play()),c):this.paused||this.stopped?u:u+h.now()-i},c.start=c.play,c},h.decode=function(e,t,n){this.context().decodeAudioData(e,t,n)},h.filter=function(){var e=h.createNode({type:"filter"}),t={},n=h.context().createBiquadFilter();return o(arguments[0])?(t.type=arguments[0].type,t.frequency=arguments[0].frequency||1e3,t.Q=arguments[0].Q,t.gain=arguments[0].gain):u.isString(arguments[0])&&(t.type=arguments[0]),e.nodeType="filter",e.type=r(n,"type"),e.frequency=r(n,"frequency"),e.Q=r(n,"Q"),e.gain=r(n,"gain"),e.type(t.type||"lowpass"),e.frequency(t.frequency||1e3),e.Q(t.Q||0),e.gain(t.gain||0),this.connect(e.input,n,e.output),e},h.analyser=function(){return this.context().createAnalyser()},h.compressor=function(e){var t=h.createNode({nodeType:"compressor"}),n=this.context().createDynamicsCompressor();return function(e,t){for(var n in t)o(e[n])&&(e[n].value=t[n])}(n,e=function(e,t){for(var n in t)e[n]=t[n];return e}({threshold:-24,knee:30,ratio:12,attack:.003,release:.25},e)),t.threshold=r(n,"threshold"),t.knee=r(n,"knee"),t.ratio=r(n,"ratio"),t.attack=r(n,"attack"),t.release=r(n,"release"),this.connect(t.input,n,t.output),t},h.processor=function(e,t){var n=e||1024,o=h.context().createScriptProcessor(n,1,1);return"function"==typeof t&&(o.onaudioprocess=function(e){t(e)}),o},h.waveShaper=function(){for(var e=this.context().createWaveShaper(),t=new Float32Array(65536),n=0;n<32768;n++)t[n]=n<3e4?.1:-1;return e.curve=t,e},h.envelope=function(e){var t={};return e=e||{},t.name=e.name||"",t.nodeType="envelope",t.startLevel=e.startLevel||0,t.maxLevel=e.maxLevel||1,t.minLevel=e.minLevel||0,t.param=e.param||null,t.attackTime=e.attack||0,t.decayTime=e.decay||0,t.sustainLevel=e.sustain||1,t.releaseTime=e.release||0,d(e.param)&&(t.param=e.param),t.start=function(e){var t=this.attackTime+this.decayTime;this.releaseTime;this.maxLevel=this.startLevel+this.maxLevel,this.sustainLevel=this.startLevel+this.sustainLevel,d(this.param)&&(e=e||h.now(),this.param.setValueAtTime(this.startLevel,e),this.param.linearRampToValueAtTime(this.maxLevel,e+this.attackTime),this.param.setValueAtTime(this.maxLevel,e+this.attackTime),this.param.exponentialRampToValueAtTime(this.sustainLevel,e+t),this.param.setValueAtTime(this.sustainLevel,e+t))},t.release=function(e){var t=this.minLevel;e=e||h.now(),0===this.minLevel&&(t=1e-8),d(this.param)&&(this.param.setValueAtTime(this.sustainLevel,e),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.setValueAtTime(this.minLevel,e+this.releaseTime))},t},h.noise=function(){for(var e=this.buffer(),t=this.bufferBox(),n=e.length,o=0;o<n;o++)e.getChannelData(0)[o]=2*Math.random()-1;return t.nodeType="noise",t.buffer(e),t.loop(!0),t},h.lfo=function(e){var t=h.oscillator(e||10),n=h.createNode({sourceNode:t,nodeType:"lfo"});return n.modulate=function(e){i(e)&&(h.connect(t,e),t.start())},n.frequency=t.frequency,n},h.getUserAudio=function(n,e){navigator.webkitGetUserMedia({audio:!0},function(e){var t=h.context().createMediaStreamSource(e);n(t)},e)},h.init=function(){var e,t,n,o;e=function(){"function"==typeof h.context&&(h.speakers=h.context().destination,h.osc=h.oscillator)},t=function(e){console.log(e)},"undefined"==typeof webkitAudioContext&&"undefined"==typeof AudioContext?"function"==typeof webkitAudioContext?void 0===webkitAudiocontext().prototype.createGainNode&&t("Sorry, your browser doesn't support a recent enough version of the Web Audio API."):"function"==typeof webkitAudiocontext&&((o=webkitAudiocontext().prototype).createGain=o.createGainNode,o.createDelay=o.createDelayNode,o.createScriptProcessor=o.createJavaScriptNode):(n=new("function"==typeof AudioContext?AudioContext:webkitAudioContext),h.context=function(){return n}),h.isBrowserSupported=!0,e()},h}();"undefined"!=typeof window&&window.document&&o.init(),t.exports=o},{"./helpers":1}],5:[function(e,t,n){"use strict";var a=e("./tsw-core");a.delay=function(e){var t=a.createNode(),n=a.wait(),o=a.gain(),r=a.gain(),i=a.gain();return t.settings={delayTime:.5,feedback:.5,level:.5},e=e||{},n.delayTime.value=e.delayTime||t.settings.delayTime,o.gain.value=e.feedback||t.settings.feedback,r.gain.value=e.level||t.settings.level,a.connect(t.input,i,n,o,n,r,t.output),a.connect(i,n),t},a.distortion=function(e){var t=a.createNode(),n=a.context().createWaveShaper(),o=a.context().createBiquadFilter(),r=a.context().createBiquadFilter();return t.settings={distortionLevel:.5},a.connect(t.input,n,[o,r],t.output),t},a.phaser=function(e){var t=a.createNode(),n=[],o=a.gain(),r=0;for(t.settings={rate:8,depth:.5,feedback:.8},e=e||{},o.gain.value=e.feedback||t.settings.feedback,e.rate=e.rate||t.settings.rate,r=0;r<e.rate;r++)n[r]=a.context().createBiquadFilter(),n[r].type=7,n[r].frequency.value=100*r;for(r=0;r<n.length-1;r++)a.connect(n[r],n[r+1]);return a.connect(t.input,n[n.length-1],o,n[0]),a.connect(n[n.length-1],t.output),t.setCutoff=function(e){for(var t=0;t<n.length;t++)n[t].frequency.value=e},t},a.reverb=function(e){var t=a.context().createConvolver(),n=a.gain(),o={},r={effectLevel:.5,reverbTime:.5,reverbType:"spring",reverbPath:""};return e=e||{},n.gain.value=e.effectLevel||r.effectLevel,a.load({hall:"/effects/reverb/responses/bright-hall.wav",room:"/effects/reverb/responses/medium-room.wav",spring:"/effects/reverb/responses/feedback-spring.wav"},function(e){r.reverbPath=e[r.reverbType],t.buffer=r.reverbPath,o.input=a.gain(),o.output=a.gain(),a.connect(o.input,[o.output,t]),a.connect(t,n),a.connect(n,o.output)}),o},a.tremolo=function(e){var t={},n=(a.gain(),this.lfo()),o=this;return t.input=a.gain(),t.connect=function(e){t.input.connect(e),n.modulate(t.input.gain),n.start(o.now())},t.setRate=function(e){n.frequency(e)},t.setDepth=function(e){n.depth(e)},t},t.exports=a},{"./tsw-core":4}],6:[function(e,t,n){var o=e("./tsw-core"),r=e("./tsw-effects"),i=e("./tsw-music"),a=e("./tsw-midi"),c=e("./tsw-analysis"),u={};for(var s in o)u[s]=o[s];for(var s in r)u[s]=r[s];for(var s in i)u[s]=i[s];for(var s in a)u[s]=a[s];for(var s in c)u[s]=c[s];t.exports=u},{"./tsw-analysis":2,"./tsw-core":4,"./tsw-effects":5,"./tsw-midi":7,"./tsw-music":8}],7:[function(e,t,n){"use strict";var i=e("./helpers"),o={},r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];o.isMidiSupported=function(){return"function"==typeof navigator.requestMIDIAccess},o.getUserMidi=function(e,t){this.isMidiSupported()&&navigator.requestMIDIAccess().then(e,t)};function a(e){var t=e.match(/^[A-g#]+/)[0],n=parseInt(e.match(/\d+/g),10);return function(e){for(var t=r.length,n=0;n<t;n++)if(e.toUpperCase()===r[n])return n;return null}(t)+12*n}o.midiNote=function(e){return i.isString(e)?a(e):i.isNumber(e)?(n=(t=e)%12,o=Math.floor(t/12),(r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]).push.apply(r,r),r[n]+o):void 0;var t,n,o,r},t.exports=o},{"./helpers":1}],8:[function(e,t,n){"use strict";var r={},a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];a.push.apply(a,a);function c(e){for(var t=a.length,n=0;n<t;n++)if(e.toUpperCase()===a[n])return n;return null}var o=["unison","flat 2nd","2nd","minor 3rd","major 3rd","perfect 4th","flat 5th","perfect 5th","minor 6th","major 6th","minor 7th","major 7th","octave","flat 9th","9th","sharp 9th","major 10th","11th","augmented 11th","perfect 12th","flat 13th","13th"];r.chord=function(e){var t,n={},o=[];return!Array.isArray(e)&&(e=e.toLowerCase(),n.rootNote=e[0].toUpperCase(),n.isMajor=-1<e.indexOf("maj"),n.isMinor=!n.isMajor&&-1<e.indexOf("m"),n.is7th=-1<e.indexOf("7"),n.notes=[],n.is7th||(n.octave=e.match(/\d/g)),n.isMajor||n.isMinor||e.is7th||(n.isMajor=!0),t=c(n.rootNote),o.push(t),e.isMinor?o.push(t+r.semitoneDifference("minor 3rd")):o.push(t+r.semitoneDifference("major 3rd")),o.push(t+r.semitoneDifference("perfect 5th")),o.push(t+r.semitoneDifference("octave")),o.forEach(function(e){n.notes.push(a[e])}),n.notes)},r.scale=function(e,t){return"minor"===t?(r=[],i=c(e),r.push(a[i]),r.push(a[i+2]),r.push(a[i+3]),r.push(a[i+5]),r.push(a[i+7]),r.push(a[i+8]),r.push(a[i+10]),r.push(a[i+12]),r):(n=[],o=c(e),n.push(a[o]),n.push(a[o+2]),n.push(a[o+4]),n.push(a[o+5]),n.push(a[o+7]),n.push(a[o+9]),n.push(a[o+11]),n.push(a[o+12]),n);var n,o,r,i},r.semitoneDifference=function(e){for(var t=o.length,n=0;n<t;n++)if(e===o[n])return n},r.flat=function(e){var t;return e=e.replace("#","b"),"H"===(t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)+1))&&(t="A"),t+=e.substr(1)},r.sharp=function(e){var t,n;return-1===e.indexOf("b")?e:(e=e.replace("b","#"),"@"===(t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)-1))&&(t="G"),"B"===t&&-1<(n=e.search(/\d/))&&(e=e.substring(0,n)+(e[n]-1)+e.substring(n+1)),t+=e.substr(1))},r.frequency=function(e){var t,n,o,r,i;return!1!=!("string"!=typeof(i=e)||3<i.length)&&(o=e.search(/\d/),t=parseInt(e.slice(-1)),isNaN(t)&&(t=4),r=e=this.sharp(e),-1<o&&(r=e.substr(0,o)),n=a.indexOf(r.toUpperCase()),n+=12*t,parseFloat(440*Math.pow(2,(n-57)/12),10))},t.exports=r},{}]},{},[3]);