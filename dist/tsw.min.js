/**
 * @name Theresa's Sound World
 * @description A JavaScript library for audio manipulation.
 * @version v0.4.5
 * @tutorial http://theresassoundworld.com
 * @author Stuart Memo
 * @license MIT
 */
!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};t[i][0].call(f.exports,function(e){var n=t[i][1][e];return o(n?n:e)},f,f.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";t.exports={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e}}},{}],2:[function(e,t,n){"use strict";var r={},o=function(e){var t=Math.floor(e/60);return{minutes:t,seconds:e-60*t,totalSeconds:e}};r.analyser=function(){var e=r.context().createAnalyser();return e},r.info=function(e){return{duration:o(e.duration),numberOfChannels:e.numberOfChannels,sampleRate:e.sampleRate}},t.exports=r},{}],3:[function(e,t,n){var r=e("./tsw-main");window.tsw=r},{"./tsw-main":7}],4:[function(e,t,n){"use strict";var r,o=e("./helpers"),a="0.4.5";r=function(){var e=function(e,t){for(var n in t)e[n]=t[n];return e},t=function(e,t){for(var n in t)e[n].value=t[n]},n=function(e){return Array.isArray(e)},r=function(e){return"function"==typeof e},i=function(e){return"object"==typeof e},u=function(e){return"undefined"!=typeof e},s=function(e){u(e);return u(e)&&null!==e?!0:void 0},c=function(e){var t=!1;return Object(e)&&"node"in e&&(t=!0),t},f=function(e){return"undefined"!=typeof e.context},p=function(e){return e.hasOwnProperty("input")||e.hasOwnProperty("output")},l=function(e){return i(e)?"setValueAtTime"in e:!1},d=function(e,t,n,r,o){if(s(o))switch(o){case"linear":e[t].setValueAtTime(e[t].value,g.now()),e[t].linearRampToValueAtTime(n,r);break;case"exponential":e[t].setValueAtTime(e[t].value,g.now()),0===n&&(n=1e-8),e[t].exponentialRampToValueAtTime(n,r);break;default:e[t].setValueAtTime(n,r)}else e[t].setValueAtTime(n,r)},h=function(e,t){return e&&s(e[t])?s(e[t].value)?e[t].value:e[t]:void 0},m=function(e,t,n,r,o){s(e[t].value)?s(r)?d(e,t,n,r,o):e[t].value=n:e[t]=n},v=function(e,t){return function(n,r,o){return s(n)?m(e,t,n,r,o):h(e,t)}},g={},y=[];g.version=a,g.isBrowserSupported=!1,g.processors=[];var w=function(e,t){var n;if("undefined"==typeof webkitAudioContext&&"undefined"==typeof AudioContext)if("undefined"==typeof webkitAudiocontext().prototype.createGainNode)t("Sorry, your browser doesn't support a recent enough version of the Web Audio API.");else{var r=webkitAudiocontext().prototype;r.createGain=r.createGainNode,r.createDelay=r.createDelayNode,r.createScriptProcessor=r.createJavaScriptNode}else"function"==typeof AudioContext?(n=new AudioContext,g.context=function(){return n}):(n=new webkitAudioContext,g.context=function(){return n});g.isBrowserSupported=!0,e()},b=function(){g.speakers=g.context().destination,g.osc=g.oscillator};g.now=function(){return this.context().currentTime},g.channelSplitter=function(){return g.context().createChannelSplitter()},g.channelMerger=function(e){return g.context().createChannelMerger(e)},g.connect=function(){var e,t=arguments.length,r=function(e,t){e.connectedTo=e.connectedTo||[],e.hasOwnProperty("connectedTo")&&e.connectedTo.push(t)},o=function(){arguments[0].connect(arguments[1],0,arguments[2]),r(arguments[0],arguments[1])},a=function(){arguments[0].connect(arguments[1].input,0,arguments[2]),r(arguments[0],arguments[1])},i=function(){for(var e=0;e<arguments[1].length;e++)g.connect(arguments[0],arguments[1][e])},u=function(){for(var e=0;e<arguments[0].length;e++)g.connect(arguments[0][e],arguments[1])},s=function(){arguments[0].output.connect(arguments[1].input,0,arguments[2]),r(arguments[0],arguments[1])},d=function(){arguments[0].output.connect(arguments[1],0,arguments[2]),r(arguments[0],arguments[1])},h=function(){for(var e=0;e<arguments[1].length;e++)g.connect(arguments[0],arguments[1][e])},m=function(){for(var e=0;e<arguments[0].length;e++)g.connect(arguments[0][e],arguments[1])},v=function(){for(var e=0;e<arguments[0].length;e++)g.connect(arguments[0][e],arguments[1])},y=function(){arguments[0].connect(arguments[1])},w=function(){arguments[0].output.connect(arguments[1])};for(e=0;t-1>e;e++){var b=arguments[e],x=arguments[e+1];if(f(b)&&p(x))a(b,x);else if(p(b)&&f(x))d(b,x);else if(f(b)&&n(x))i(b,x);else if(n(b)&&f(x))u(b,x);else if(f(b)&&f(x))o(b,x);else if(p(b)&&p(x))s(b,x);else if(p(b)&&n(x))h(b,x);else if(n(b)&&p(x))m(b,x);else if(n(b)&&n(x))v(b,x);else if(c(b)&&n(x))connectObjectWithNodeToArray(b,x);else if(n(b)&&c(x))connectArrayToObjectWithNode(b,x);else{if(c(b)&&c(x)){if(f(b.node)&&f(x.node)){o(b.node,x.node,x.channel);continue}if(p(b.node)&&f(x.node)){d(b.node,x.node,x.channel);continue}if(f(b.node)&&p(x.node)){a(b.node,x.node,x.channel);continue}if(p(b.node)&&p(x.node)){s(b.node,x.node,x.channel);continue}}f(b)&&l(x)?y(b,x):p(b)&&l(x)&&w(b,x)}}},g.disconnect=function(){var e,t=arguments.length;for(e=0;t>e;e++)arguments[e].disconnect&&(arguments[e].disconnect(),arguments[e].connectedTo=[]),p(arguments[e])&&(g.disconnect(arguments[e].output),arguments[e].connectedTo=[])},g.disconnectAfterTime=function(e,t){y.push({node:e,time:t})},g.load=function(){var e,t,n={},o=arguments[0],a="",i=[],u=0,s=0,c=0,f=this,p=function(e,t,n,o,a,i){var p=new XMLHttpRequest;p.open("GET",e+n,!0),p.responseType="arraybuffer";var l=function(){u++,f.context().decodeAudioData(p.response,function(e){o[t]=e,Object.keys(o).length===c&&a(o)})},d=function(){s++,r(i)?i():console.log("There was an error loading your file(s)",p.status)};p.onreadystatechange=function(){4===p.readyState&&(200===p.status?l():d())},p.send()};if("object"==typeof arguments[1]?(a=arguments[1].path||"",i=arguments[1].extensions||[]):"function"==typeof arguments[1]&&(e=arguments[1]),"function"==typeof arguments[2]&&(t=arguments[2]),"object"==typeof o){c=Object.keys(o).length;for(var l in o)p(a,l,o[l],n,e,t)}else{if("string"!=typeof o)throw new Error("Files must be an array or a valid string.");c=1}},g.wait=function(e){var t,n=this.context().createDelay();return t=g.createNode(),t.nodeType="wait",t.time=v(n,"delayTime"),t.time(e||1),g.connect(t.input,n,t.output),t},g.createMonoMaker=function(){var e={};return e.input=g.createGain(),e.output=g.createGain(),g.connect(e.input,e.output),e},g.panner=function(e){var t,n=(g.gain(),g.gain(0)),r=g.gain(0),o=g.channelMerger(2);t=g.createNode(),t.nodeType="panner";var a=function(e){return e>1?e=1:-1>e&&(e=-1),e};return t.pan=function(e,t){var o;return u(e)?(e=a(e||0),o=1-(e+1)/2,n.gain(o,t),r.gain(1-o,t),void 0):-(2*(n.gain()-1))-1},t.pan(e||0),g.connect(t.input,[n,r]),g.connect({node:n},{node:o,channel:0}),g.connect({node:r},{node:o,channel:1}),g.connect(o,t.output),t},g.play=function(e,t){t=t||0,n(e)?e.forEach(function(e){e.start(t)}):e.start(t)},g.stop=function(e,t){t=t||0,e.stop(t)},g.reverse=function(e){for(var t=0;t<e.buffer.numberOfChannels;t++)Array.prototype.reverse.call(e.buffer.getChannelData(t));return e};var x=function(e){this.start=function(t){return"undefined"==typeof e.sourceNode.start?e.sourceNode.noteOn(t||g.now()):e.sourceNode.start(t||g.now()),this},this.stop=function(t){return"undefined"==typeof e.sourceNode.stop?e.sourceNode.noteOff(t||g.now()):e.sourceNode.stop(t||g.now()),this}};return g.createNode=function(e){var t={};return e=e||{},t.input=g.context().createGain(),t.output=g.context().createGain(),Object.keys(e).forEach(function(n){t[n]=e[n]}),t.connectedTo=[],e.hasOwnProperty("sourceNode")?x.call(t,e):e.sourceNode=!1,t},g.oscillator=function(e,t){var n,r=g.context().createOscillator();return n=g.createNode({sourceNode:r,nodeType:"oscillator"}),n.frequency=v(r,"frequency"),n.type=v(r,"type"),n.detune=v(r,"detune"),n.params={frequency:r.frequency},n.frequency(e||440),n.type((t||"sine").toLowerCase()),n.isPlaying=function(){return 2===r.playbackState?!0:!1},this.connect(r,n.output),n},g.gain=function(e,t){var n,r;return r="function"==typeof this.context().createGain?this.context().createGain():this.context().createGainNode(),n=g.createNode({nodeType:"gain"}),n.params={gain:r.gain},n.gain=v(r,"gain"),n.gain(e,t),this.connect(n.input,r,n.output),n},g.buffer=function(e,t,n){var r;return e=e||1,t=t||65536,n=n||44100,r=this.context().createBuffer(e,t,n),r.nodeType="buffer",r},g.bufferBox=function(e){var t,n,r,o,a=g.createNode({nodeType:"bufferBox",paused:!1,stopped:!0}),i=0,u=!1;return a.buffer=function(e){return e?void(t=e):t},a.loop=function(e){return u=e,this},e&&a.buffer(e),a.play=function(e){var s=this;n=g.context().createBufferSource(),n.buffer=t,n.loop=u,this.paused=!1,this.stopped=!1,g.connect(n,a.output),n.onended=function(){s.paused||(i=0,s.stopped=!0),o&&o()},r=g.now(),n.start(g.now(),i)},a.stop=function(e){i=0,this.paused=!1,this.stopped=!0,n&&n.stop(e||g.now())},a.on=function(e,t){"end"===e&&(o=t)},a.pause=function(e){this.paused=!0,n.stop(e||g.now()),g.disconnect(n),this.stopped||(i=i+g.now()-r)},a.position=function(e){return e||0===e?void(i=e):this.paused||this.stopped?i:i+g.now()-r},a.start=a.play,a},g.decode=function(e,t,n){this.context().decodeAudioData(e,t,n)},g.filter=function(){var e=g.createNode({type:"filter"}),t={},n=g.context().createBiquadFilter();return i(arguments[0])?(t.type=arguments[0].type,t.frequency=arguments[0].frequency||1e3,t.Q=arguments[0].Q,t.gain=arguments[0].gain):o.isString(arguments[0])&&(t.type=arguments[0]),e.nodeType="filter",e.type=v(n,"type"),e.frequency=v(n,"frequency"),e.Q=v(n,"Q"),e.gain=v(n,"gain"),e.type(t.type||"lowpass"),e.frequency(t.frequency||1e3),e.Q(t.Q||0),e.gain(t.gain||0),this.connect(e.input,n,e.output),e},g.analyser=function(){return this.context().createAnalyser()},g.compressor=function(n){var r=g.createNode({nodeType:"compressor"}),o=this.context().createDynamicsCompressor(),a={threshold:-24,knee:30,ratio:12,attack:.003,release:.25,reduction:0};return n=e(a,n),t(o,n),r.threshold=v(o,"threshold"),r.knee=v(o,"knee"),r.ratio=v(o,"ratio"),r.attack=v(o,"attack"),r.release=v(o,"release"),r.reduction=v(o,"reduction"),this.connect(r.input,o,r.output),r},g.processor=function(e,t){var n=e||1024,r=g.context().createScriptProcessor(n,1,1);return"function"==typeof t&&(r.onaudioprocess=function(e){t(e)}),r},g.waveShaper=function(){for(var e=this.context().createWaveShaper(),t=new Float32Array(65536),n=0;32768>n;n++)3e4>n?t[n]=.1:t[n]=-1;return e.curve=t,e},g.envelope=function(e){var t={};return e=e||{},t.name=e.name||"",t.nodeType="envelope",t.startLevel=e.startLevel||0,t.maxLevel=e.maxLevel||1,t.minLevel=e.minLevel||0,t.param=e.param||null,t.attackTime=e.attack||0,t.decayTime=e.decay||0,t.sustainLevel=e.sustain||1,t.releaseTime=e.release||0,l(e.param)&&(t.param=e.param),t.start=function(e){var t=this.attackTime+this.decayTime;t+this.releaseTime;this.maxLevel=this.startLevel+this.maxLevel,this.sustainLevel=this.startLevel+this.sustainLevel,l(this.param)&&(e=e||g.now(),this.param.setValueAtTime(this.startLevel,e),this.param.linearRampToValueAtTime(this.maxLevel,e+this.attackTime),this.param.setValueAtTime(this.maxLevel,e+this.attackTime),this.param.exponentialRampToValueAtTime(this.sustainLevel,e+t),this.param.setValueAtTime(this.sustainLevel,e+t))},t.release=function(e){var t=this.minLevel;e=e||g.now(),0===this.minLevel&&(t=1e-8),l(this.param)&&(this.param.setValueAtTime(this.sustainLevel,e),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.exponentialRampToValueAtTime(t,e+this.releaseTime),this.param.setValueAtTime(this.minLevel,e+this.releaseTime))},t},g.noise=function(){var e,t=this.buffer(),n=this.bufferBox(),r=t.length;for(e=0;r>e;e++)t.getChannelData(0)[e]=2*Math.random()-1;return n.nodeType="noise",n.buffer(t),n.loop(!0),n},g.lfo=function(e){var t,n=g.oscillator(e||10);return t=g.createNode({sourceNode:n,nodeType:"lfo"}),t.modulate=function(e){s(e)&&(g.connect(n,e),n.start())},t.frequency=n.frequency,t},g.getUserAudio=function(e,t){var n=function(t){var n=g.context().createMediaStreamSource(t);e(n)};navigator.webkitGetUserMedia({audio:!0},n,t)},g.init=function(){w(function(){b()},function(e){console.log(e)})},g}(),r.init(),t.exports=r},{"./helpers":1}],5:[function(e,t,n){"use strict";var r=e("./tsw-core");r.delay=function(e){var t=r.createNode(),n=r.wait(),o=r.gain(),a=r.gain(),i=r.gain();return t.settings={delayTime:.5,feedback:.5,level:.5},e=e||{},n.delayTime.value=e.delayTime||t.settings.delayTime,o.gain.value=e.feedback||t.settings.feedback,a.gain.value=e.level||t.settings.level,r.connect(t.input,i,n,o,n,a,t.output),r.connect(i,n),t},r.distortion=function(e){var t=r.createNode(),n=r.context().createWaveShaper(),o=r.context().createBiquadFilter(),a=r.context().createBiquadFilter();return t.settings={distortionLevel:.5},e=e||{},r.connect(t.input,n,[o,a],t.output),t},r.phaser=function(e){var t=r.createNode(),n=[],o=r.gain(),a=0;for(t.settings={rate:8,depth:.5,feedback:.8},e=e||{},o.gain.value=e.feedback||t.settings.feedback,e.rate=e.rate||t.settings.rate,a=0;a<e.rate;a++)n[a]=r.context().createBiquadFilter(),n[a].type=7,n[a].frequency.value=100*a;for(a=0;a<n.length-1;a++)r.connect(n[a],n[a+1]);return r.connect(t.input,n[n.length-1],o,n[0]),r.connect(n[n.length-1],t.output),t.setCutoff=function(e){for(var t=0;t<n.length;t++)n[t].frequency.value=e},t},r.reverb=function(e){var t=r.context().createConvolver(),n=r.gain(),o={},a={effectLevel:.5,reverbTime:.5,reverbType:"spring",reverbPath:""};return e=e||{},n.gain.value=e.effectLevel||a.effectLevel,r.load({hall:"/effects/reverb/responses/bright-hall.wav",room:"/effects/reverb/responses/medium-room.wav",spring:"/effects/reverb/responses/feedback-spring.wav"},function(e){a.reverbPath=e[a.reverbType],t.buffer=a.reverbPath,o.input=r.gain(),o.output=r.gain(),r.connect(o.input,[o.output,t]),r.connect(t,n),r.connect(n,o.output)}),o},r.tremolo=function(e){var t={},n=(r.gain(),this.lfo()),o=this;return e=e||{},t.input=r.gain(),t.connect=function(e){t.input.connect(e),n.modulate(t.input.gain),n.start(o.now())},t.setRate=function(e){n.frequency(e)},t.setDepth=function(e){n.depth(e)},t},t.exports=r},{"./tsw-core":4}],6:[function(e,t,n){"use strict";var r={},o=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){"start"===e.data&&setInterval(function(){self.postMessage("tick")},25)})}.toString(),")()"],{type:"application/javascript"})),a=new Worker(o);URL.revokeObjectURL(o),r.secondsPerBeat=function(e){return 60/e},r.loop=function(e,t,n){var o,i,u,s=0,c=.1;t=t||120,n=n||16,i=n/4,u=1/i,o=r.now(),a.postMessage("start"),a.addEventListener("message",function(a){if("tick"===a.data)for(;o<r.now()+c;)e(o,s+1),o+=u*r.secondsPerBeat(t),s++,s===n&&(s=0)})},t.exports=r},{}],7:[function(e,t,n){var r=e("./tsw-core"),o=e("./tsw-effects"),a=e("./tsw-music"),i=e("./tsw-loop"),u=e("./tsw-midi"),s=e("./tsw-analysis"),c={};for(var f in r)c[f]=r[f];for(var f in o)c[f]=o[f];for(var f in a)c[f]=a[f];for(var f in i)c[f]=i[f];for(var f in u)c[f]=u[f];for(var f in s)c[f]=s[f];t.exports=c},{"./tsw-analysis":2,"./tsw-core":4,"./tsw-effects":5,"./tsw-loop":6,"./tsw-midi":8,"./tsw-music":9}],8:[function(e,t,n){"use strict";var r=e("./helpers"),o={},a=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=function(e){for(var t,n=a.length,r=0;n>r;r++)if(e.toUpperCase()===a[r])return t=r,r;return null};o.isMidiSupported=function(){return"function"==typeof navigator.requestMIDIAccess},o.getUserMidi=function(e,t){this.isMidiSupported()&&navigator.requestMIDIAccess().then(e,t)};var u=function(e){var t=e.match(/^[A-g#]+/)[0],n=parseInt(e.match(/\d+/g),10),r=i(t);return r+12*n},s=function(e){var t=e%12,n=Math.floor(e/12),r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return r.push.apply(r,r),r[t]+n};o.midiNote=function(e){return r.isString(e)?u(e):r.isNumber(e)?s(e):void 0},t.exports=o},{"./helpers":1}],9:[function(e,t,n){"use strict";var r={},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];o.push.apply(o,o);var a=["unison","flat 2nd","2nd","minor 3rd","major 3rd","perfect 4th","flat 5th","perfect 5th","minor 6th","major 6th","minor 7th","major 7th","octave","flat 9th","9th","sharp 9th","major 10th","11th","augmented 11th","perfect 12th","flat 13th","13th"],i=function(e){for(var t,n=o.length,r=0;n>r;r++)if(e.toUpperCase()===o[r])return t=r,r;return null},u=function(e){var t=[],n=i(e);return t.push(o[n]),t.push(o[n+2]),t.push(o[n+4]),t.push(o[n+5]),t.push(o[n+7]),t.push(o[n+9]),t.push(o[n+11]),t.push(o[n+12]),t},s=function(e){var t=[],n=i(e);return t.push(o[n]),t.push(o[n+2]),t.push(o[n+3]),t.push(o[n+5]),t.push(o[n+7]),t.push(o[n+8]),t.push(o[n+10]),t.push(o[n+12]),t},c=function(e){return"string"!=typeof e||e.length>3?!1:!0};r.chord=function(e){var t={},n=[],a=0;return Array.isArray(e)?!1:(e=e.toLowerCase(),t.rootNote=e[0].toUpperCase(),t.isMajor=e.indexOf("maj")>-1,t.isMinor=!t.isMajor&&e.indexOf("m")>-1,t.is7th=e.indexOf("7")>-1,t.notes=[],t.is7th||(t.octave=e.match(/\d/g)),t.isMajor||t.isMinor||e.is7th||(t.isMajor=!0),a=i(t.rootNote),n.push(a),e.isMinor?n.push(a+r.semitoneDifference("minor 3rd")):n.push(a+r.semitoneDifference("major 3rd")),n.push(a+r.semitoneDifference("perfect 5th")),n.push(a+r.semitoneDifference("octave")),n.forEach(function(e){t.notes.push(o[e])}),t.notes)},r.scale=function(e,t){return"minor"===t?s(e):u(e)},r.semitoneDifference=function(e){for(var t=a.length,n=0;t>n;n++)if(e===a[n])return n},r.flat=function(e){var t;return e=e.replace("#","b"),t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)+1),"H"===t&&(t="A"),t+=e.substr(1)},r.sharp=function(e){var t,n=0;return-1===e.indexOf("b")?e:(e=e.replace("b","#"),t=String.fromCharCode(e[0].toUpperCase().charCodeAt(0)-1),"@"===t&&(t="G"),"B"===t&&(n=e.search(/\d/),n>-1&&(e=e.substring(0,n)+(e[n]-1)+e.substring(n+1))),t+=e.substr(1))},r.frequency=function(e){var t,n,r,a;return c(e)===!1?!1:(r=e.search(/\d/),t=parseInt(e.slice(-1)),isNaN(t)&&(t=4),e=this.sharp(e),a=e,r>-1&&(a=e.substr(0,r)),n=o.indexOf(a.toUpperCase()),n+=12*t,parseFloat(440*Math.pow(2,(n-57)/12),10))},t.exports=r},{}]},{},[3]);